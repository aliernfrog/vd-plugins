(function(r,i,c,B,o,e,l,s){"use strict";const{createStyles:C}=o.findByProps("createStyles"),{Text:x,TextInput:E}=e.ReactNative,N=C({codeBlock:{fontFamily:e.constants.Fonts.CODE_NORMAL,fontSize:12,textAlignVertical:"center",backgroundColor:s.semanticColors.BACKGROUND_SECONDARY,color:s.semanticColors.TEXT_NORMAL,borderWidth:1,borderRadius:12,borderColor:s.semanticColors.BACKGROUND_TERTIARY,padding:10}}),S=function({style:t,children:n}){return React.createElement(E,{editable:!0,multiline:!0,style:[N().codeBlock,t&&t],value:n})};function u({selectable:t,style:n,children:a}){return React.createElement(S,{style:n,children:a})}const b=function(t){const n=JSON.parse(JSON.stringify(t));for(const a in n.author)switch(a){case"email":case"phone":case"mfaEnabled":case"hasBouncedEmail":delete n.author[a]}return n},{Button:d}=o.findByProps("Button","Stack"),{ScrollView:v}=e.ReactNative;function w({message:t}){const n=e.React.useMemo(function(){return JSON.stringify(b(t),null,4)},[t.id]),a={margin:8};return e.React.createElement(e.React.Fragment,null,e.React.createElement(v,{style:{flex:1}},e.React.createElement(d,{text:"Copy Raw Content",style:a,variant:"secondary",disabled:!t.content,onPress:function(){e.clipboard.setString(t.content),l.showToast("Copied content to clipboard",c.getAssetIDByName("toast_copy_link"))}}),e.React.createElement(d,{text:"Copy Raw Data",style:a,variant:"secondary",onPress:function(){e.clipboard.setString(n),l.showToast("Copied data to clipboard",c.getAssetIDByName("toast_copy_link"))}}),t.content&&e.React.createElement(u,{selectable:!0,style:a},t.content),e.React.createElement(u,{selectable:!0,style:a},n)))}const f=o.findByProps("openLazy","hideActionSheet"),{ActionSheetRow:R}=o.findByProps("ActionSheetRow"),y=o.findByProps("push","pushLazy","pop"),A=o.findByProps("getRenderCloseButton")?.getRenderCloseButton??o.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,P=o.findByName("Navigator")??o.findByProps("Navigator")?.Navigator,O=i.before("openLazy",f,function([t,n,a]){const p=a?.message;n!=="MessageLongPressActionSheet"||!p||t.then(function(T){const D=i.after("default",T,function(M,I){e.React.useEffect(function(){return function(){D()}},[]);const g=B.findInReactTree(I,function(L){return L?.some?.(function(h){return h?.type?.name==="ButtonRow"||h?.type?.name==="ActionSheetRow"})});if(!g)return;const _=function(){return e.React.createElement(P,{initialRouteName:"RawPage",goBackOnBackPress:!0,screens:{RawPage:{title:"ViewRaw",headerLeft:A?.(function(){return y.pop()}),render:function(){return e.React.createElement(w,{message:p})}}}})};g.push(e.React.createElement(R,{label:"View Raw",icon:e.React.createElement(R.Icon,{source:c.getAssetIDByName("ChatIcon")}),onPress:function(){f.hideActionSheet(),y.push(_)}}))})})}),k=function(){return O()};return r.onUnload=k,r})({},vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.metro,vendetta.metro.common,vendetta.ui.toasts,vendetta.ui);
