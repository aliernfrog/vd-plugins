(function(r,i,o,E,c,e,l,s){"use strict";const{createStyles:C}=c.findByProps("createStyles"),{Text:N,TextInput:U}=e.ReactNative,S=C({codeBlock:{fontFamily:e.constants.Fonts.CODE_NORMAL,fontSize:12,textAlignVertical:"center",backgroundColor:s.semanticColors.BACKGROUND_SECONDARY,color:s.semanticColors.TEXT_NORMAL??s.semanticColors.TEXT_DEFAULT,borderWidth:1,borderRadius:12,borderColor:s.semanticColors.BACKGROUND_TERTIARY??s.semanticColors.BACKGROUND_BASE_LOWEST,padding:10}}),u=function({selectable:t,style:n,children:a}){return React.createElement(N,{onPress:function(){},selectable:t,style:[S().codeBlock,n&&n]},a)};function d({selectable:t,style:n,children:a}){return t?React.createElement(u,{style:n,children:a,selectable:!0}):React.createElement(u,{style:n,children:a})}const b=function(t){const n=JSON.parse(JSON.stringify(t));for(const a in n.author)switch(a){case"email":case"phone":case"mfaEnabled":case"hasBouncedEmail":delete n.author[a]}return n},{Button:f}=c.findByProps("Button","Stack"),{ScrollView:A}=e.ReactNative;function P({message:t}){const n=e.React.useMemo(function(){return JSON.stringify(b(t),null,4)},[t.id]),a={margin:8};return e.React.createElement(e.React.Fragment,null,e.React.createElement(A,{style:{flex:1}},e.React.createElement(f,{text:"Copy Raw Content",style:a,variant:"secondary",disabled:!t.content,onPress:function(){e.clipboard.setString(t.content),l.showToast("Copied content to clipboard",o.getAssetIDByName("toast_copy_link"))}}),e.React.createElement(f,{text:"Copy Raw Data",style:a,variant:"secondary",onPress:function(){e.clipboard.setString(n),l.showToast("Copied data to clipboard",o.getAssetIDByName("toast_copy_link"))}}),t.content&&e.React.createElement(d,{selectable:!0,style:a},t.content),e.React.createElement(d,{selectable:!0,style:a},n)))}const R=c.findByProps("openLazy","hideActionSheet"),{ActionSheetRow:y}=c.findByProps("ActionSheetRow"),p=c.findByProps("push","pushLazy","pop"),w=c.findByProps("getRenderCloseButton")?.getRenderCloseButton??c.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,v=c.findByName("Navigator")??c.findByProps("Navigator")?.Navigator,T=i.before("openLazy",R,function([t,n,a]){const g=a?.message;n!=="MessageLongPressActionSheet"||!g||t.then(function(_){const D=i.after("default",_,function(x,k){e.React.useEffect(function(){return function(){D()}},[]);const h=E.findInReactTree(k,function(I){return I?.some?.(function(B){return B?.type?.name==="ButtonRow"||B?.type?.name==="ActionSheetRow"})});if(!h)return;const L=function(){return e.React.createElement(v,{initialRouteName:"RawPage",goBackOnBackPress:!0,screens:{RawPage:{title:"ViewRaw",headerLeft:w?.(function(){return p.pop()}),render:function(){return e.React.createElement(P,{message:g})}}}})};h.push(e.React.createElement(y,{label:"View Raw",icon:e.React.createElement(y.Icon,{source:o.getAssetIDByName("ChatIcon")}),onPress:function(){R.hideActionSheet(),p.push(L)}}))})})}),O=function(){return T()};return r.onUnload=O,r})({},vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.metro,vendetta.metro.common,vendetta.ui.toasts,vendetta.ui);
