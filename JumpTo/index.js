(function(g,t,R,f,o,y,s){"use strict";const{openUrl:S}=t.findByProps("openUrl");function A(e){S?S(e):e?.openURL?.(e)}function L(e,r,n){return`https://discord.com/channels/${e??"@me"}/${r}/${n}`}function w(e){return L(e.guild_id,e.id,e.id)}const{hideActionSheet:U}=t.findByProps("openLazy","hideActionSheet"),{ActionSheetRow:d}=t.findByProps("ActionSheetRow"),v=t.findByName("ForumPostLongPressActionSheet",!1),T=o.getAssetIDByName("LinkIcon")??o.getAssetIDByName("ic_copy_message_link"),b=o.getAssetIDByName("toast_copy_link");var k=f.after("default",v,function([{thread:e}],r){const n=s.findInReactTree(r,function(h){return h?.[0]?.type?.name==="ActionSheetRowGroup"});if(!n)return;const a=w(e);n.unshift(React.createElement(d.Group,{key:"jumptovd"},React.createElement(d,{label:"Jump To Starter Message",icon:React.createElement(d.Icon,{source:T}),onPress:function(){A(a)},onLongPress:function(){R.clipboard.setString(a),y.showToast("Copied starter message URL",b),U()}})))});const I=t.findByProps("openLazy","hideActionSheet"),{ActionSheetRow:_}=t.findByProps("ActionSheetRow"),p=o.getAssetIDByName("LinkIcon")??o.getAssetIDByName("ic_copy_message_link"),E=o.getAssetIDByName("toast_copy_link");var N=f.before("openLazy",I,function([e,r,n]){r!="MessageLongPressActionSheet"||!n?.message||e.then(function(a){const h=f.after("default",a,function(G,B){React.useEffect(function(){return function(){h()}},[]);const u=n?.message?.messageReference;if(!u?.message_id)return;let c=s.findInReactTree(B,function(i){return i?.some?.(function(l){return l?.props?.iconSource==p})});if(!c?.length){const i=s.findInReactTree(B,function(m){return m?.[0]?.type?.name==="ActionSheetRowGroup"}),l=Math.min(1,i.length-1);c=s.findInReactTree(i[l],function(m){return m?.some?.(function(z){return z?.type?.name==="ActionSheetRow"})})}if(!c?.length)return;const $=Math.max(c.findIndex(function(i){return i?.props?.iconSource===p}),c.length-1),P=L(u.guild_id,u.channel_id,u.message_id);c.splice($,0,React.createElement(_,{label:"Jump To Reference",icon:React.createElement(_.Icon,{source:p}),onLongPress:function(){R.clipboard.setString(P),y.showToast("Copied referenced message URL",E),I.hideActionSheet()},onPress:function(){A(P)}}))})})});const D=[k,N],M=function(){return D.forEach(function(e){return e?.()})};return g.onUnload=M,g})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.ui.toasts,vendetta.utils);
